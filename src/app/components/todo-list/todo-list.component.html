<div class="container">
	<h1>ğŸ“ Angular Todo App</h1>

	<!-- Todo Form -->
	<app-todo-form (todoAdded)="addTodo($event.todo, $event.userId)"></app-todo-form>

	<!-- Filters -->
	<div class="filters">
		<h3>ğŸ” Bá»™ lá»c</h3>
		<div class="filter-row">
			<div class="form-group">
				<label>Lá»c theo User ID:</label>
				<input type="number" [(ngModel)]="selectedUserId" (change)="onFilterChange()"
					placeholder="Nháº­p User ID (1-30)" />
			</div>

			<div class="form-group">
				<label>Tráº¡ng thÃ¡i:</label>
				<select [(ngModel)]="filterCompleted" (change)="onFilterChange()">
					<option value="all">Táº¥t cáº£</option>
					<option value="completed">ÄÃ£ hoÃ n thÃ nh</option>
					<option value="pending">ChÆ°a hoÃ n thÃ nh</option>
				</select>
			</div>

			<div class="form-group">
				<label>Sá»‘ items má»—i trang:</label>
				<select [(ngModel)]="itemsPerPage" (change)="onFilterChange()">
					<option [value]="5">5</option>
					<option [value]="10">10</option>
					<option [value]="20">20</option>
					<option [value]="30">30</option>
				</select>
			</div>
		</div>

		<div style="margin-top: 15px">
			<button class="btn-warning" (click)="getRandomTodo()">ğŸ² Láº¥y Random Todo</button>
		</div>
	</div>

	<!-- Error Message -->
	<div *ngIf="error" class="error">âŒ {{ error }}</div>

	<!-- Loading State -->
	<div *ngIf="loading" class="loading">â³ Äang táº£i...</div>

	<!-- Todo List -->
	<div *ngIf="!loading">
		<h3>ğŸ“‹ Danh sÃ¡ch Todos ({{ totalItems }} items)</h3>

		<ul class="todo-list" *ngIf="todos.length > 0">
			<!-- Sá»­ dá»¥ng TodoItemComponent - Demo Component Communication -->
			<app-todo-item *ngFor="let todo of todos" [todo]="todo" [isEditing]="editingTodoId === todo.id"
				[editText]="editTodoText" (toggleComplete)="toggleComplete($event)" (startEdit)="startEdit($event)"
				(saveEdit)="saveEdit($event)" (cancelEdit)="cancelEdit()" (delete)="deleteTodo($event)"
				(editTextChange)="editTodoText = $event">
			</app-todo-item>
		</ul>

		<div *ngIf="todos.length === 0" style="text-align: center; padding: 40px; color: #6c757d">
			KhÃ´ng cÃ³ todo nÃ o
		</div>

		<!-- Pagination -->
		<div class="pagination" *ngIf="totalPages > 1">
			<button class="btn-secondary" [disabled]="!hasPrevPage" (click)="changePage(currentPage - 1)">
				â† TrÆ°á»›c
			</button>

			<span>Trang {{ currentPage }} / {{ totalPages }}</span>

			<button class="btn-secondary" [disabled]="!hasNextPage" (click)="changePage(currentPage + 1)">
				Sau â†’
			</button>
		</div>
	</div>
</div>